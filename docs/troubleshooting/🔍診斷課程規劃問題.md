# ğŸ” èª²ç¨‹è¦åŠƒæŸ¥è©¢å•é¡Œè¨ºæ–·

**å•é¡Œï¼š** é™³å®¥æ„·é¡¯ç¤ºã€Œæš«ç„¡èª²ç¨‹è¦åŠƒã€  
**æ—¥æœŸï¼š** 2025-10-23  
**ç‹€æ…‹ï¼š** âœ… å·²æ‰¾åˆ°åŸå› 

---

## ğŸ“Š å•é¡Œåˆ†æ

### 1ï¸âƒ£ ã€Œæš«ç„¡èª²ç¨‹è¦åŠƒã€å‡ºç¾åŸå› 

é€™å€‹è¨Šæ¯å‡ºç¾åœ¨ `server.js:1565-1590`ï¼Œç•¶ä»¥ä¸‹æƒ…æ³ç™¼ç”Ÿæ™‚ï¼š

```javascript
// API æŸ¥è©¢å¤±æ•—æ™‚é¡¯ç¤º
if (!apiResult || !apiResult.success) {
    // é¡¯ç¤ºã€ŒğŸ“‹ æš«ç„¡èª²ç¨‹è¦åŠƒã€
}
```

### 2ï¸âƒ£ API æ¸¬è©¦çµæœ

æˆ‘æ¸¬è©¦äº†èª²ç¨‹è¦åŠƒ APIï¼š

```bash
# âœ… SPM å…­ 9:30-11:00 - æˆåŠŸï¼ˆæ‰¾åˆ° 4 å€‹èª²ç¨‹ï¼‰
curl -G --data-urlencode "course=SPM" \
     --data-urlencode "period=å…­ 9:30-11:00" \
     --data-urlencode "format=json" \
     'https://course-viewer.funlearnbar.synology.me/api/find-course'

å›æ‡‰ï¼š
{
  "success": true,
  "count": 4,
  "courses": [
    {
      "displayName": "SPM å…­ 9:30-11:00  åˆ°åºœ",
      "url": "/viewer.html?file=..."
    },
    {
      "displayName": "SPM å…­ 9:30-11:00",
      "url": "/viewer.html?file=..."
    }
  ]
}

# âŒ BOOST å…­ 9:30-11:00 - å¤±æ•—ï¼ˆæ‰¾ä¸åˆ°èª²ç¨‹ï¼‰
curl -G --data-urlencode "course=BOOST" \
     --data-urlencode "period=å…­ 9:30-11:00" \
     --data-urlencode "format=json" \
     'https://course-viewer.funlearnbar.synology.me/api/find-course'

å›æ‡‰ï¼š
{
  "success": false,
  "error": "æ‰¾ä¸åˆ°ç¬¦åˆçš„èª²ç¨‹ï¼šBOOST å…­ 9:30-11:00"
}
```

---

## ğŸ¯ çµè«–

æ ¹æ“šæ¸¬è©¦çµæœï¼Œé™³å®¥æ„·é¡¯ç¤ºã€Œæš«ç„¡èª²ç¨‹è¦åŠƒã€çš„åŸå› æ˜¯ï¼š

| é …ç›® | é¡¯ç¤ºçš„å€¼ | å¯¦éš›ç‹€æ³ |
|------|---------|---------|
| å­¸ç”Ÿå§“å | é™³å®¥æ„· | âœ… æ­£ç¢º |
| èª²ç¨‹é¡å‹ | **BOOST** | âŒ **è³‡æ–™éŒ¯èª¤** |
| æ­£ç¢ºèª²ç¨‹ | **SPM** | âœ… API æœ‰æ­¤èª²ç¨‹ |
| ä¸Šèª²æ™‚æ®µ | å…­ 9:30-11:00 | âœ… æ­£ç¢º |

**å•é¡Œæ ¸å¿ƒ**ï¼šGoogle Sheets ä¸­é™³å®¥æ„·çš„èª²ç¨‹é¡å‹æ¬„ä½å¡«å¯«ç‚º **BOOST**ï¼Œä½†å¯¦éš›èª²ç¨‹æ‡‰è©²æ˜¯ **SPM**ã€‚

---

## ğŸ› ï¸ è§£æ±ºæ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šä¿®æ­£ Google Sheets è³‡æ–™ï¼ˆæ¨è–¦ï¼‰

1. é–‹å•Ÿå­¸ç”Ÿè³‡æ–™è¡¨ï¼ˆGoogle Sheetsï¼‰
2. æ‰¾åˆ°ã€Œé™³å®¥æ„·ã€é€™ä¸€åˆ—
3. å°‡ã€Œèª²ç¨‹é¡å‹ã€æ¬„ä½å¾ **BOOST** æ”¹ç‚º **SPM**
4. å„²å­˜å¾Œç­‰å¾… 1-2 åˆ†é˜è®“ç³»çµ±åŒæ­¥

### æ–¹æ¡ˆ 2ï¼šæª¢æŸ¥è³‡æ–™ç¶å®š

å¦‚æœèª²ç¨‹é¡å‹æ˜¯æ­£ç¢ºçš„ï¼Œå¯èƒ½æ˜¯ä»¥ä¸‹å•é¡Œï¼š

```bash
# æª¢æŸ¥æ­¥é©Ÿ
1. ç¢ºèªé™³å®¥æ„·çš„ LINE userId æ˜¯å¦æ­£ç¢ºç¶å®š
2. ç¢ºèªèª²ç¨‹è¦åŠƒæª”æ¡ˆåç¨±æ˜¯å¦å®Œå…¨åŒ¹é…
3. æª¢æŸ¥ Google Sheets è³‡æ–™æ˜¯å¦æœ‰åŒæ­¥å•é¡Œ
```

### æ–¹æ¡ˆ 3ï¼šæ‰‹å‹•æ¸¬è©¦ API

```bash
# æ¸¬è©¦èª²ç¨‹è¦åŠƒ API
curl -G \
  --data-urlencode "course=SPM" \
  --data-urlencode "period=å…­ 9:30-11:00" \
  --data-urlencode "format=json" \
  'https://course-viewer.funlearnbar.synology.me/api/find-course'
```

---

## âœ… é—œéµå­—å›æ‡‰ç¢ºèª

### å•é¡Œï¼šé—œéµå­—æ˜¯å¦åŒæ­¥å›å‚³çµ¦ç®¡ç†å“¡ï¼Ÿ

**å›ç­”ï¼šâŒ ä¸æœƒï¼Œå·²ç¢ºèªåªåœ¨ä½¿ç”¨è€…èŠå¤©å®¤å›å‚³**

æª¢æŸ¥äº†æ‰€æœ‰é—œéµå­—çš„è™•ç†ä»£ç¢¼ï¼ˆ`server.js:5747-5950`ï¼‰ï¼š

```javascript
// #æœ¬æœŸèª²ç¨‹è¦åŠƒ
if (messageText === '#æœ¬æœŸèª²ç¨‹è¦åŠƒ' || messageText === '#å®Œæ•´èª²ç¨‹è¦åŠƒ') {
    // ... è™•ç†é‚è¼¯
    await sendLineFlexMessage(flexMessage, userId);  // âœ… åªç™¼çµ¦ userId
    await sendLineMessage(`ğŸ“˜ å·²é¡¯ç¤º...`, userId);   // âœ… åªç™¼çµ¦ userId
    return; // âœ… ç›´æ¥è¿”å›ï¼Œä¸è½‰ç™¼
}

// #å‰©é¤˜å ‚æ•¸
if (messageText === '#å‰©é¤˜å ‚æ•¸' || ...) {
    // ... è™•ç†é‚è¼¯
    await sendLineFlexMessage(flexMessage, userId);  // âœ… åªç™¼çµ¦ userId
    return; // âœ… ç›´æ¥è¿”å›ï¼Œä¸è½‰ç™¼
}

// æ‰€æœ‰å…¶ä»–é—œéµå­—åŒç†
```

**ç¢ºèªäº‹é …ï¼š**
- âœ… æ²’æœ‰ `config.adminUserId` çš„èª¿ç”¨
- âœ… æ²’æœ‰é€šçŸ¥ç®¡ç†å“¡çš„é‚è¼¯
- âœ… æ‰€æœ‰é—œéµå­—è™•ç†å¾Œéƒ½ `return`ï¼Œä¸æœƒç¹¼çºŒåŸ·è¡Œ
- âœ… ä¸æœƒè§¸ç™¼ webhook è½‰ç™¼åˆ°å…¶ä»–ç³»çµ±

---

## ğŸ“‹ é—œéµå­—å®Œæ•´åˆ—è¡¨

| é—œéµå­— | åŠŸèƒ½ | å›æ‡‰ä½ç½® | è½‰ç™¼ç®¡ç†å“¡ |
|--------|------|---------|-----------|
| `#æœ¬æœŸèª²ç¨‹è¦åŠƒ` | æŸ¥è©¢ç•¶æœŸèª²ç¨‹è¦åŠƒ | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |
| `#å®Œæ•´èª²ç¨‹è¦åŠƒ` | æŸ¥è©¢å®Œæ•´èª²ç¨‹è¦åŠƒ | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |
| `#å‰©é¤˜å ‚æ•¸` | æŸ¥è©¢å‰©é¤˜å ‚æ•¸ï¼ˆç²¾ç°¡ï¼‰ | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |
| `#å‰©é¤˜å ‚æ•¸å®Œæ•´` | æŸ¥è©¢å‰©é¤˜å ‚æ•¸ï¼ˆå®Œæ•´ï¼‰ | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |
| `#å‡ºç¼ºå‹¤` | æŸ¥è©¢å‡ºç¼ºå‹¤è¨˜éŒ„ | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |
| `#å®Œæ•´å‡ºç¼ºå‹¤` | æŸ¥è©¢å®Œæ•´å‡ºç¼ºå‹¤ | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |
| `#å…§éƒ¨äººå“¡` | åˆ‡æ›å…§éƒ¨äººå“¡æ¨¡å¼ | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |
| `#è§£ç¶` | è§£é™¤ Rich Menu | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |
| `#æ¸¬è©¦` | æ¸¬è©¦æ¨¡å¼ | âœ… åƒ…ä½¿ç”¨è€… | âŒ å¦ |

---

## ğŸ”§ å¿«é€Ÿæª¢æŸ¥è…³æœ¬

```bash
#!/bin/bash

echo "=== æª¢æŸ¥å­¸ç”Ÿèª²ç¨‹è¦åŠƒ ==="

# æ¸¬è©¦ SPM
echo "æ¸¬è©¦ SPM å…­ 9:30-11:00ï¼š"
curl -s -G \
  --data-urlencode "course=SPM" \
  --data-urlencode "period=å…­ 9:30-11:00" \
  --data-urlencode "format=json" \
  'https://course-viewer.funlearnbar.synology.me/api/find-course' \
  | python3 -c "import sys, json; data = json.load(sys.stdin); print(f\"âœ… æˆåŠŸ: {data['count']} å€‹èª²ç¨‹\" if data.get('success') else f\"âŒ å¤±æ•—: {data.get('error')}\")"

# æ¸¬è©¦ BOOST
echo "æ¸¬è©¦ BOOST å…­ 9:30-11:00ï¼š"
curl -s -G \
  --data-urlencode "course=BOOST" \
  --data-urlencode "period=å…­ 9:30-11:00" \
  --data-urlencode "format=json" \
  'https://course-viewer.funlearnbar.synology.me/api/find-course' \
  | python3 -c "import sys, json; data = json.load(sys.stdin); print(f\"âœ… æˆåŠŸ: {data['count']} å€‹èª²ç¨‹\" if data.get('success') else f\"âŒ å¤±æ•—: {data.get('error')}\")"
```

---

## ğŸ“ å¾ŒçºŒæ­¥é©Ÿ

1. **ç«‹å³è™•ç†**ï¼šä¿®æ­£ Google Sheets ä¸­é™³å®¥æ„·çš„èª²ç¨‹é¡å‹
2. **é©—è­‰**ï¼šè«‹é™³å®¥æ„·çš„å®¶é•·é‡æ–°è¼¸å…¥ `#æœ¬æœŸèª²ç¨‹è¦åŠƒ`
3. **ç›£æ§**ï¼šæª¢æŸ¥ logs ç¢ºèª API èª¿ç”¨æˆåŠŸ

---

**è¨ºæ–·å®Œæˆæ—¥æœŸï¼š** 2025-10-23  
**è¨ºæ–·è€…ï¼š** AI Assistant  
**ç‹€æ…‹ï¼š** âœ… å•é¡Œå·²æ‰¾åˆ°ï¼Œç­‰å¾…ä¿®æ­£è³‡æ–™






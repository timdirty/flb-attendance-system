# ğŸ”§ ä¿®å¾©é€±æ¬¡å°èˆª - å¿«é€ŸæŒ‡å¼•

**æª”æ¡ˆï¼š** special-events-manager.html  
**ä½ç½®ï¼š** course-viewer.funlearnbar.synology.me

---

## ğŸ¯ éœ€è¦ä¿®æ”¹çš„ 4 å€‹åœ°æ–¹

### âœ… ä¿®æ”¹ 1ï¼šJavaScript ç‹€æ…‹åˆå§‹åŒ–ï¼ˆæ‰¾åˆ° Line 1362 é™„è¿‘ï¼‰

**æœå°‹ï¼š**
```javascript
timeRange: 'today',
```

**æ›¿æ›ç‚ºï¼š**
```javascript
timeRange: 'week',
```

---

### âœ… ä¿®æ”¹ 2ï¼šHTML é è¨­æŒ‰éˆ•ç‹€æ…‹ï¼ˆæ‰¾åˆ° Line 1103 é™„è¿‘ï¼‰

**æœå°‹ï¼š**
```html
<button class="time-range-btn active" data-range="today" onclick="changeTimeRange('today')">
    ä»Šæ—¥
</button>
<button class="time-range-btn" data-range="week" onclick="changeTimeRange('week')">
    æœ¬é€±
</button>
```

**æ›¿æ›ç‚ºï¼š**
```html
<button class="time-range-btn" data-range="today" onclick="changeTimeRange('today')">
    ä»Šæ—¥
</button>
<button class="time-range-btn active" data-range="week" onclick="changeTimeRange('week')">
    æœ¬é€±
</button>
```

---

### âœ… ä¿®æ”¹ 3ï¼šé€±è¦–åœ–ç¯©é¸é‚è¼¯ï¼ˆæ‰¾åˆ° Line 1726 é™„è¿‘ï¼‰

**æœå°‹ï¼š**
```javascript
} else if (state.timeRange === 'week') {
    const startOfWeek = new Date(today);
    startOfWeek.setDate(today.getDate() - today.getDay());
    const endOfWeek = new Date(startOfWeek);
    endOfWeek.setDate(startOfWeek.getDate() + 7);
```

**æ›¿æ›ç‚ºï¼š**
```javascript
} else if (state.timeRange === 'week') {
    const startOfWeek = new Date(state.currentViewDate);
    startOfWeek.setDate(state.currentViewDate.getDate() - state.currentViewDate.getDay());
    startOfWeek.setHours(0, 0, 0, 0);
    const endOfWeek = new Date(startOfWeek);
    endOfWeek.setDate(startOfWeek.getDate() + 7);
```

---

### âœ… ä¿®æ”¹ 4ï¼šé€±è¦–åœ–æ¸²æŸ“å‡½æ•¸ï¼ˆæ‰¾åˆ° Line 1850 é™„è¿‘ï¼‰

**æœå°‹ï¼š**
```javascript
function renderWeekView(container) {
    const today = new Date();
    const startOfWeek = new Date(today);
    startOfWeek.setDate(today.getDate() - today.getDay());
```

**æ›¿æ›ç‚ºï¼š**
```javascript
function renderWeekView(container) {
    const startOfWeek = new Date(state.currentViewDate);
    startOfWeek.setDate(state.currentViewDate.getDate() - state.currentViewDate.getDay());
    startOfWeek.setHours(0, 0, 0, 0);
```

---

## ğŸ“ ä½¿ç”¨ sed å‘½ä»¤æ‰¹æ¬¡ä¿®æ”¹ï¼ˆé€²éšï¼‰

å¦‚æœæ‚¨æœ‰ SSH æ¬Šé™è¨ªå•ä¼ºæœå™¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

### 1. å‚™ä»½åŸæª”æ¡ˆ
```bash
cp special-events-manager.html special-events-manager.html.backup.$(date +%Y%m%d)
```

### 2. åŸ·è¡Œä¿®æ”¹

```bash
# ä¿®æ”¹ 1ï¼šç‹€æ…‹åˆå§‹åŒ–
sed -i.bak "s/timeRange: 'today',/timeRange: 'week',/g" special-events-manager.html

# ä¿®æ”¹ 2ï¼šHTML æŒ‰éˆ• - ç¬¬ä¸€æ­¥ï¼šç§»é™¤ today çš„ active
sed -i.bak 's/<button class="time-range-btn active" data-range="today"/<button class="time-range-btn" data-range="today"/g' special-events-manager.html

# ä¿®æ”¹ 2ï¼šHTML æŒ‰éˆ• - ç¬¬äºŒæ­¥ï¼šåŠ  active åˆ° week
sed -i.bak 's/<button class="time-range-btn" data-range="week"/<button class="time-range-btn active" data-range="week"/g' special-events-manager.html

# ä¿®æ”¹ 3 & 4ï¼šéœ€è¦æ‰‹å‹•ç·¨è¼¯ï¼Œå› ç‚ºæ¶‰åŠå¤šè¡Œæ›¿æ›
```

### 3. æ‰‹å‹•ç·¨è¼¯å‰©é¤˜éƒ¨åˆ†
```bash
nano special-events-manager.html
# æˆ–
vim special-events-manager.html
```

ç„¶å¾Œæœå°‹ä¸¦ä¿®æ”¹ä¿®æ”¹é» 3 å’Œ 4ã€‚

---

## ğŸ§ª é©—è­‰ä¿®æ”¹

ä¿®æ”¹å®Œæˆå¾Œï¼ŒåŸ·è¡Œä»¥ä¸‹æª¢æŸ¥ï¼š

### 1. æª¢æŸ¥èªæ³•
```bash
# ç°¡å–®æª¢æŸ¥ JavaScript èªæ³•
node -c special-events-manager.html 2>&1 || echo "èªæ³•å¯èƒ½æœ‰èª¤"
```

### 2. æª¢æŸ¥é—œéµå­—æ˜¯å¦æ­£ç¢ºæ›¿æ›
```bash
# æª¢æŸ¥é è¨­è¦–åœ–æ˜¯å¦æ”¹ç‚º week
grep "timeRange: 'week'" special-events-manager.html

# æª¢æŸ¥æŒ‰éˆ• active ç‹€æ…‹
grep -A2 'data-range="week"' special-events-manager.html | grep "active"

# æª¢æŸ¥æ˜¯å¦ä½¿ç”¨ currentViewDate
grep "state.currentViewDate.getDate()" special-events-manager.html
```

### 3. ç€è¦½å™¨æ¸¬è©¦
1. æ‰“é–‹é é¢ä¸¦å¼·åˆ¶é‡æ–°è¼‰å…¥ï¼ˆCmd/Ctrl + Shift + Rï¼‰
2. æª¢æŸ¥é è¨­è¦–åœ–æ˜¯å¦ç‚ºã€Œæœ¬é€±ã€
3. é»æ“Šã€Œä¸Šä¸€æœŸ/ä¸‹ä¸€æœŸã€æ¸¬è©¦å°èˆª
4. æª¢æŸ¥é–‹ç™¼è€…å·¥å…·çš„ Console æ˜¯å¦æœ‰éŒ¯èª¤

---

## ğŸ“ æ‰¾ä¸åˆ°è¡Œè™Ÿï¼Ÿä½¿ç”¨é—œéµå­—æœå°‹

### ä¿®æ”¹ 1 é—œéµå­—ï¼š
```javascript
const state = {
    allEvents: [],
    filteredEvents: [],
    currentEvent: null,
    currentViewDate: new Date(),
    timeRange: 'today',  // â† æ”¹é€™è£¡
```

### ä¿®æ”¹ 2 é—œéµå­—ï¼š
```html
<div class="time-range-buttons">
    <button class="time-range-btn active" data-range="today"  // â† ç§»é™¤ active
    <button class="time-range-btn" data-range="week"  // â† åŠ ä¸Š active
```

### ä¿®æ”¹ 3 é—œéµå­—ï¼š
```javascript
function applyTimeRangeFilter() {
    // ...
    } else if (state.timeRange === 'week') {
        const startOfWeek = new Date(today);  // â† æ”¹ç”¨ state.currentViewDate
```

### ä¿®æ”¹ 4 é—œéµå­—ï¼š
```javascript
function renderWeekView(container) {
    const today = new Date();  // â† åˆªé™¤é€™è¡Œ
    const startOfWeek = new Date(today);  // â† æ”¹ç”¨ state.currentViewDate
```

---

## âš¡ å¿«é€Ÿè¤‡è£½è²¼ä¸Šç‰ˆæœ¬

### ä¿®æ”¹ 3 å®Œæ•´ç¨‹å¼ç¢¼
```javascript
} else if (state.timeRange === 'week') {
    const startOfWeek = new Date(state.currentViewDate);
    startOfWeek.setDate(state.currentViewDate.getDate() - state.currentViewDate.getDay());
    startOfWeek.setHours(0, 0, 0, 0);
    const endOfWeek = new Date(startOfWeek);
    endOfWeek.setDate(startOfWeek.getDate() + 7);
    
    state.filteredEvents = state.allEvents.filter(e => 
        e.dtstart >= startOfWeek.getTime() / 1000 && 
        e.dtstart < endOfWeek.getTime() / 1000
    );
}
```

### ä¿®æ”¹ 4 å®Œæ•´ç¨‹å¼ç¢¼ï¼ˆå‡½æ•¸é–‹é ­éƒ¨åˆ†ï¼‰
```javascript
function renderWeekView(container) {
    const startOfWeek = new Date(state.currentViewDate);
    startOfWeek.setDate(state.currentViewDate.getDate() - state.currentViewDate.getDay());
    startOfWeek.setHours(0, 0, 0, 0);

    document.getElementById('calendarTitle').innerHTML = `
        <span class="material-icons">view_week</span>
        æœ¬é€± (${formatDate(startOfWeek)})
    `;

    const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
    const days = [];

    for (let i = 0; i < 7; i++) {
        const day = new Date(startOfWeek);
        day.setDate(startOfWeek.getDate() + i);
        days.push(day);
    }
    
    // ... å…¶é¤˜ä¿æŒä¸è®Š
}
```

---

## ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

### æ–¹å¼ 1ï¼šç›´æ¥ç·¨è¼¯ï¼ˆæ¨è–¦ï¼‰
1. ç”¨ FTP/SFTP ä¸‹è¼‰ special-events-manager.html
2. ç”¨ç·¨è¼¯å™¨ï¼ˆVS Codeã€Sublime Textï¼‰æ‰“é–‹
3. ä½¿ç”¨ Ctrl+F/Cmd+F æœå°‹é—œéµå­—ä¸¦ä¿®æ”¹
4. ä¸Šå‚³å›ä¼ºæœå™¨
5. æ¸…é™¤ç€è¦½å™¨å¿«å–ä¸¦æ¸¬è©¦

### æ–¹å¼ 2ï¼šSSH ç›´æ¥ä¿®æ”¹
```bash
# é€£æ¥ä¼ºæœå™¨
ssh user@funlearnbar.synology.me

# é€²å…¥ç›®éŒ„
cd /path/to/course-viewer/

# å‚™ä»½
cp special-events-manager.html special-events-manager.html.backup

# ç·¨è¼¯
nano special-events-manager.html
# æˆ–
vim special-events-manager.html

# å„²å­˜å¾Œæ¸¬è©¦
```

### æ–¹å¼ 3ï¼šSynology File Station
1. é–‹å•Ÿ File Station
2. æ‰¾åˆ°æª”æ¡ˆä¸¦ä¸‹è¼‰
3. ç·¨è¼¯å¾Œä¸Šå‚³
4. æ¸¬è©¦

---

## âœ… æª¢æŸ¥æ¸…å–®

å®Œæˆä¿®æ”¹å¾Œï¼Œç¢ºèªä»¥ä¸‹é …ç›®ï¼š

- [ ] ä¿®æ”¹ 1ï¼š`timeRange: 'week'` âœ“
- [ ] ä¿®æ”¹ 2ï¼šã€Œæœ¬é€±ã€æŒ‰éˆ•æœ‰ `active` class âœ“
- [ ] ä¿®æ”¹ 2ï¼šã€Œä»Šæ—¥ã€æŒ‰éˆ•æ²’æœ‰ `active` class âœ“
- [ ] ä¿®æ”¹ 3ï¼šç¯©é¸é‚è¼¯ä½¿ç”¨ `state.currentViewDate` âœ“
- [ ] ä¿®æ”¹ 4ï¼šæ¸²æŸ“å‡½æ•¸ä½¿ç”¨ `state.currentViewDate` âœ“
- [ ] å‚™ä»½åŸæª”æ¡ˆ âœ“
- [ ] ç€è¦½å™¨æ¸¬è©¦ï¼šé è¨­è¦–åœ–ç‚ºæœ¬é€± âœ“
- [ ] ç€è¦½å™¨æ¸¬è©¦ï¼šä¸Šä¸€æœŸ/ä¸‹ä¸€æœŸå¯åˆ‡æ›é€±æ¬¡ âœ“
- [ ] ç€è¦½å™¨æ¸¬è©¦ï¼šç„¡ Console éŒ¯èª¤ âœ“

---

**ä¿®å¾©æ™‚é–“ï¼š** ç´„ 5-10 åˆ†é˜  
**é›£åº¦ï¼š** â­â­â˜†â˜†â˜† ç°¡å–®  
**é¢¨éšªï¼š** ä½ï¼ˆå·²å‚™ä»½ä¸”æ˜“æ–¼é‚„åŸï¼‰





